<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="PlanNameSpace">
    <insert id="addPlan" parameterType="map">
         INSERT INTO z_plan(Plan_userid,Plan_name,Plan_docnum,Plan_local1,Plan_local2,Plan_local3,Plan_street,Plan_time,Plan_url,Plan_context,Plan_state) VALUES (#{Plan_userid},#{Plan_name},#{Plan_docnum},#{local1},#{local2},#{local3},#{address},#{Plan_time},#{url},#{filename},#{Plan_state});
    </insert>

    <update id="addPlan" parameterType="map">
        UPDATE INTO z_plan(Plan_userid,Plan_name,Plan_docnum,Plan_local1,Plan_local2,Plan_local3,Plan_street,Plan_time,Plan_url,Plan_context,Plan_state) VALUES (#{Plan_userid},#{Plan_name},#{Plan_docnum},#{local1},#{local2},#{local3},#{address},#{Plan_time},#{url},#{filename},#{Plan_state})
        WHERE Plan_name=#{Plan_name}
    </update>

    <update id="detailPlan" parameterType="map">
    UPDATE INTO z_plan(Plan_state) VALUES (#{Plan_state}) WHERE Plan_name=#{Plan_name}
    </update>

    <select id="selectPlan" parameterType="map" resultType="map">
        SELECT * FROM z_Plan
        <where>
            <if test="local1!=null and local1 != '' ">
                Plan_local1 =#{local1}
            </if>
            <if test="local2!=null and local2 !='' ">
                AND Plan_local2=#{local2}
            </if>
        </where>
        limit #{pageNum},#{pageSize};
    </select>

    <select id="Plandetail" parameterType="map" resultType="map">
        SELECT * FROM z_Plan WHERE Plan_id=#{Planid};
    </select>

    <select id="typecount" resultType="java.lang.Integer" parameterType="map">
        SELECT COUNT(*) FROM z_Plan
        <where>
            <if test="local1!=null and local1 != '' ">
                Plan_local1 =#{local1}
            </if>
            <if test="local2!=null and local2 !='' ">
                and Plan_local2=#{local2}
            </if>
        </where>
    </select>
</mapper>
